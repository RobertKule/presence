<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
        .section { margin-bottom: 40px; }
    </style>
</head>
<body>
    <h1>Espace Administrateur</h1>
    <p><a href="{% url 'dashboard' %}">Retour utilisateur</a> | <a href="{% url 'logout' %}">Déconnexion</a></p>

    <div class="section">
        <h2>Enseignants</h2>
        <table>
            <tr><th>Nom</th><th>Email</th></tr>
            {% for e in enseignants %}
            <tr><td>{{ e.username }}</td><td>{{ e.email }}</td></tr>
            {% empty %}<tr><td colspan="2">Aucun enseignant</td></tr>{% endfor %}
        </table>
    </div>

    <div class="section">
        <h2>Cours</h2>
        <table>
            <tr><th>Nom</th><th>Classe</th><th>Enseignant</th></tr>
            {% for c in cours %}
            <tr><td>{{ c.nom }}</td><td>{{ c.classe.nom }}</td><td>{{ c.enseignant.username }}</td></tr>
            {% empty %}<tr><td colspan="3">Aucun cours</td></tr>{% endfor %}
        </table>
    </div>
    <div class="section">
    <h2>Classes</h2>
    <a href="{% url 'classe_create' %}">➕ Ajouter</a>
    <table border="1" cellpadding="5">
        <tr><th>Nom</th><th>Actions</th></tr>
        {% for c in classes %}
        <tr>
            <td>{{ c.nom }}</td>
            <td>
                <a href="{% url 'classe_update' c.id %}">✏️ Modifier</a> | 
                <a href="{% url 'classe_delete' c.id %}" onclick="return confirm('Supprimer ?')">🗑️ Supprimer</a>
            </td>
        </tr>
        {% empty %}<tr><td colspan="2">Aucune classe</td></tr>{% endfor %}
    </table>
</div>


<div class="section">
    <h2>Étudiants</h2>
    <a href="{% url 'etudiant_create' %}">➕ Ajouter</a>
    <table border="1" cellpadding="5">
        <tr><th>Nom</th><th>Classe</th><th>Actions</th></tr>
        {% for e in etudiants %}
        <tr>
            <td>{{ e.nom }}</td>
            <td>{{ e.classe.nom }}</td>
            <td>
                <a href="{% url 'etudiant_update' e.id %}">✏️ Modifier</a> | 
                <a href="{% url 'etudiant_delete' e.id %}" onclick="return confirm('Supprimer ?')">🗑️ Supprimer</a>
            </td>
        </tr>
        {% empty %}<tr><td colspan="3">Aucun étudiant</td></tr>{% endfor %}
    </table>
</div>


<div class="section">
    <h2>Cours</h2>
    <a href="{% url 'cours_create' %}">➕ Ajouter</a>
    <table border="1" cellpadding="5">
        <tr><th>Titre</th><th>Enseignant</th><th>Classe</th><th>Actions</th></tr>
        {% for co in cours %}
        <tr>
            <td>{{ co.titre }}</td>
            <td>{{ co.enseignant.username }}</td>
            <td>{{ co.classe.nom }}</td>
            <td>
                <a href="{% url 'cours_update' co.id %}">✏️ Modifier</a> | 
                <a href="{% url 'cours_delete' co.id %}" onclick="return confirm('Supprimer ?')">🗑️ Supprimer</a>
            </td>
        </tr>
        {% empty %}<tr><td colspan="4">Aucun cours</td></tr>{% endfor %}
    </table>
</div>

    <div class="section">
        <h2>Classes</h2>
        <table>
            <tr><th>Nom</th><th>Nombre d'étudiants</th></tr>
            {% for cl in classes %}
            <tr><td>{{ cl.nom }}</td><td>{{ cl.etudiants.count }}</td></tr>
            {% empty %}<tr><td colspan="2">Aucune classe</td></tr>{% endfor %}
        </table>
    </div>

    <div class="section">
        <h2>Étudiants</h2>
        <table>
            <tr><th>Nom</th><th>Prénom</th><th>Classe</th></tr>
            {% for etu in etudiants %}
            <tr><td>{{ etu.nom }}</td><td>{{ etu.prenom }}</td><td>{{ etu.classe.nom }}</td></tr>
            {% empty %}<tr><td colspan="3">Aucun étudiant</td></tr>{% endfor %}
        </table>
    </div>
</body>
</html>
